!function(r){function e(t){if(a[t])return a[t].exports;var n=a[t]={i:t,l:!1,exports:{}};return r[t].call(n.exports,n,n.exports,e),n.l=!0,n.exports}var a={};e.m=r,e.c=a,e.d=function(r,a,t){e.o(r,a)||Object.defineProperty(r,a,{configurable:!1,enumerable:!0,get:t})},e.n=function(r){var a=r&&r.__esModule?function(){return r.default}:function(){return r};return e.d(a,"a",a),a},e.o=function(r,e){return Object.prototype.hasOwnProperty.call(r,e)},e.p="/othello-react/",e(e.s=0)}([function(r,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var t=a(1);self.addEventListener("message",function(r){var e=r.data[0],a=r.data[1],n=r.data[2],o=performance.now(),i=new t.a,f=i.findMove(e,a,n),u=performance.now();postMessage({x:f.x,y:f.y,score:f.score,evals:i.getNumEvals(),time:Math.round(u-o)})},!1)},function(r,e,a){"use strict";function t(r,e){if(!(r instanceof e))throw new TypeError("Cannot call a class as a function")}var n=function(){function r(r,e){for(var a=0;a<e.length;a++){var t=e[a];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(r,t.key,t)}}return function(e,a,t){return a&&r(e.prototype,a),t&&r(e,t),e}}(),o=function(){function r(){t(this,r),this.num_evals=0,this.square_values=[[10,-1,0,0,0,0,-1,10],[-1,-4,0,0,0,0,-4,-1],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[-1,-4,0,0,0,0,-4,-1],[10,-1,0,0,0,0,-1,10]]}return n(r,[{key:"getNumEvals",value:function(){return this.num_evals}},{key:"setNumEvals",value:function(r){this.num_evals=r}},{key:"getScore",value:function(r,e){for(var a=0,t=0;t<8;t++)for(var n=0;n<8;n++)r[t][n]===e&&a++;return a}},{key:"isAvailableMove",value:function(r,e,a){for(var t=0;t<r.length;t++)if(r[t].x===e&&r[t].y===a)return!0;return!1}},{key:"getAvailableMoves",value:function(r,e){for(var a=[],t=0;t<8;t++)for(var n=0;n<8;n++)this.isValidMove(r,e,t,n)&&a.push({x:t,y:n});return a}},{key:"isValidMove",value:function(r,e,a,t){if(0!==r[a][t])return!1;var n=1===e?2:1;if(a>0&&r[a-1][t]===n)for(var o=a-2;o>=0&&0!==r[o][t];o--)if(r[o][t]===e)return!0;if(a<7&&r[a+1][t]===n)for(var i=a+2;i<8&&0!==r[i][t];i++)if(r[i][t]===e)return!0;if(t>0&&r[a][t-1]===n)for(var f=t-2;f>=0&&0!==r[a][f];f--)if(r[a][f]===e)return!0;if(t<7&&r[a][t+1]===n)for(var u=t+2;u<8&&0!==r[a][u];u++)if(r[a][u]===e)return!0;if(a>0&&t>0&&r[a-1][t-1]===n)for(var v=2;v<8&&!(a-v<0||t-v<0)&&0!==r[a-v][t-v];v++)if(r[a-v][t-v]===e)return!0;if(a<7&&t>0&&r[a+1][t-1]===n)for(var s=2;s<8&&!(a+s>7||t-s<0)&&0!==r[a+s][t-s];s++)if(r[a+s][t-s]===e)return!0;if(a<7&&t<7&&r[a+1][t+1]===n)for(var l=2;l<8&&!(a+l>7||t+l>7)&&0!==r[a+l][t+l];l++)if(r[a+l][t+l]===e)return!0;if(a>0&&t<7&&r[a-1][t+1]===n)for(var c=2;c<8&&!(a-c<0||t+c>7)&&0!==r[a-c][t+c];c++)if(r[a-c][t+c]===e)return!0;return!1}},{key:"makeMove",value:function(r,e,a,t){var n=1===e?2:1,o=!1,i=-1;if(a>0&&r[a-1][t]===n){for(var f=a-2;f>=0&&0!==r[f][t];f--)if(r[f][t]===e){r[a][t]=e,o=!0,i=f;break}if(-1!==i)for(var u=a-1;u>i;u--)r[u][t]=e}var v=-1;if(a<7&&r[a+1][t]===n){for(var s=a+2;s<8&&0!==r[s][t];s++)if(r[s][t]===e){r[a][t]=e,o=!0,v=s;break}if(-1!==v)for(var l=a+1;l<v;l++)r[l][t]=e}var c=-1;if(t>0&&r[a][t-1]===n){for(var h=t-2;h>=0&&0!==r[a][h];h--)if(r[a][h]===e){r[a][t]=e,o=!0,c=h;break}if(-1!==c)for(var y=t-1;y>c;y--)r[a][y]=e}var d=-1;if(t<7&&r[a][t+1]===n){for(var k=t+2;k<8&&0!==r[a][k];k++)if(r[a][k]===e){r[a][t]=e,o=!0,d=k;break}if(-1!==d)for(var b=t+1;b<d;b++)r[a][b]=e}var g=-1;if(a>0&&t>0&&r[a-1][t-1]===n){for(var p=2;p<8&&!(a-p<0||t-p<0)&&0!==r[a-p][t-p];p++)if(r[a-p][t-p]===e){r[a][t]=e,o=!0,g=p;break}if(-1!==g)for(var m=1;m<g;m++)r[a-m][t-m]=e}var M=-1;if(a<7&&t>0&&r[a+1][t-1]===n){for(var x=2;x<8&&!(a+x>7||t-x<0)&&0!==r[a+x][t-x];x++)if(r[a+x][t-x]===e){r[a][t]=e,o=!0,M=x;break}if(-1!==M)for(var _=1;_<M;_++)r[a+_][t-_]=e}var O=-1;if(a<7&&t<7&&r[a+1][t+1]===n){for(var w=2;w<8&&!(a+w>7||t+w>7)&&0!==r[a+w][t+w];w++)if(r[a+w][t+w]===e){r[a][t]=e,o=!0,O=w;break}if(-1!==O)for(var P=1;P<O;P++)r[a+P][t+P]=e}var q=-1;if(a>0&&t<7&&r[a-1][t+1]===n){for(var E=2;E<8&&!(a-E<0||t+E>7)&&0!==r[a-E][t+E];E++)if(r[a-E][t+E]===e){r[a][t]=e,o=!0,q=E;break}if(-1!==q)for(var j=1;j<q;j++)r[a-j][t+j]=e}return o}},{key:"getOtherPlayer",value:function(r){return 1===r?2:1}},{key:"evaluate",value:function(r){for(var e=this.getScore(r,1)-this.getScore(r,2),a=0,t=0;t<8;t++)for(var n=0;n<8;n++)1===r[t][n]?a+=this.square_values[t][n]:1===r[t][n]&&(a-=this.square_values[t][n]);return e+a}},{key:"findMove",value:function(r,e,a){var t=arguments.length>3&&void 0!==arguments[3]?arguments[3]:-1e6,n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1e6;this.num_evals++;var o=this.getOtherPlayer(e);if(a<=0)return{score:this.evaluate(r)};var i=this.getAvailableMoves(r,e);if(0===i.length)return 0===this.getAvailableMoves(r,o).length?{score:this.evaluate(r)}:this.findMove(r,o,a-1,t,n);for(var f={score:1===e?-1e5:1e5,x:i[0].x,y:i[0].y},u=0;u<i.length;u++){var v=this.copyBoard(r);this.makeMove(v,e,i[u].x,i[u].y);var s=this.findMove(v,o,a-1,t,n);if(1===e&&(s.score>f.score&&(f.score=s.score,f.x=i[u].x,f.y=i[u].y),(t=Math.max(t,s.score))>=n))break;if(2===e&&(s.score<f.score&&(f.score=s.score,f.x=i[u].x,f.y=i[u].y),n=Math.min(n,s.score),t>=n))break}return f}},{key:"copyBoard",value:function(r){return r.map(function(r){return r.slice()})}},{key:"toJSON",value:function(){return{square_values:this.square_values,findMove:this.findMove}}}]),r}();e.a=o}]);
//# sourceMappingURL=1167d059fcce93c5e9cf.worker.js.map